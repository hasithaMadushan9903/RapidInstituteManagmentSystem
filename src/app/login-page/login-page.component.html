<div class="banner-img">
    <p-toast></p-toast>
    <div class="grid pt-5">
        <div class="col-10"></div>
        <div class="col-2">
            <button label="Student Registration" class="p-button-info" pButton (click)="openStudentForm(true)"></button>
        </div>
    </div>
    <div class="container">
        <div class="left-side">
            <div class="grid">
                <div class="col-5"></div>
                <div class="col-2 mt-3">
                    <!-- <img src="../../assets/transparentLogo.png" alt="Rapid Logo" width="100px" height="80px"> -->
                </div>
                <div class="col-5"></div>
            </div>

            <div class="grid">
                <div class="col-12 business-name">
                    <span>Edugrowa Online Institute</span><br>
                    <span>Inspiring Student Community</span>
                </div>
                
            </div>
            <div class="grid">
                <div class="col-12 text-white text-2xl font-bold ml-3">
                    Vision :
                </div>
                <div class="col-12 text-white ml-3 pr-6">
                    <span>
                        <p class="parprphalign">To become a leading online education institute in Sri Lanka, empowering O/L students with quality digital learning experiences that inspire growth, confidence, and academic excellence anytime, anywhere.</p>
                    </span>
                </div>
                <div class="col-12 text-white text-2xl font-bold ml-3">
                    Mission :
                </div>
                <div class="col-12 text-white ml-3 pr-6">
                    <span>
                        <p class="parprphalign">To deliver engaging, high-quality online education aligned with the Sri Lankan O/L syllabus, empowering every students to learn, grow, and succeed from.</p>
                    </span>
                </div>
                <div class="col-12 text-white text-2xl font-bold ml-3">
                    Contact info :
                </div>
                <div class="col-12 text-white ml-3 pr-6">
                    <span>
                        <p class="parprphalign"><b>Phone Number : </b> 0776941130</p>
                        <p class="parprphalign"><b>Email Address : </b> madushanhasitha4141@gmail.com</p>
                    </span>
                </div>
            </div>
        </div>
        <div class="right-side">
            <div class="grid mt-3">
                <div class="col-3"></div>
                <div class="col-6">
                    <div class="login-content">
                        <span>LOGIN</span>
                    </div>
                </div>
                <div class="col-3"></div>
            </div>
            <div  class="login-data">
                <div class="grid ml-3 mr-3 mt-7">
                    <div class="col-12 p-float-label" [formGroup]="loginForm">
                        <input type="text" pInputText class="inputsStyle" id="userName" formControlName="userName" autocomplete="off"> 
                        <label For="userName">Enter Your User Code</label>
                    </div>
                </div>
                <div class="grid ml-3 mr-3 mt-7">
                    <div class="col-12 p-float-label" [formGroup]="loginForm">
                        <input type="password" pInputText class="inputsStyle" id="password" formControlName="password"> 
                        <label For="password">Enter Your Password</label>
                    </div>
                </div>
                <div class="grid ml-3 mr-3 mt-7">
                    <div class="col-3">
                        <button label="Reset" class="p-button-secondary" pButton (click)="login()"></button>
                    </div>
                    <div class="col-6"></div>
                    <div class="col-3">
                        <button label="Log In" class="p-button-success" [disabled]="!loginForm.valid" pButton (click)="login()"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="grid mt-3 ml-10">
        <div class="col-2"></div>
        <div class="col-10">
            <div class="grid">
                <div class="col-4">
                    <button class="transparent-btn" (click)="loadTerms(1)"> Terms & Conditionse</button>
                </div>
                <div class="col-4">
                    <button class="transparent-btn" (click)="loadTerms(2)"> Privacy Policy</button>
                </div>
                <div class="col-4">
                    <button class="transparent-btn" (click)="loadTerms(3)"> Refund Policy</button>
                </div>
            </div>
        </div>
    </div>
</div>


<p-dialog header="Quick Student Registration Form" [(visible)]="isStudentFormVisible" [style]="{width: '60vw'}" [modal]="true" (onHide)="closeQuickStudentCreationPopup()">
    <p-steps [model]="steps" [readonly]="true" [(activeIndex)]="activeStepIndex"></p-steps>
    <br>
    <div class="grid">
        <div class="col-10"></div>
        <div class="col-2"  *ngIf="activeStepIndex == 0 || activeStepIndex == 1">
            <span class="Requied ">* </span> <b> Requied</b> 
        </div>
    </div><br>

    <!-- student form -->
    <form *ngIf="activeStepIndex == 0"  [formGroup]="studentDetailForm">
        <div class="grid">
            <div class="col-12 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="FullName" formControlName="fullName">
                <label For="FullName"><span class="Requied ">* </span>Full Name</label>
            </div>
        </div>

        <div class="grid pt-5">
            <div class="col-4 p-float-label">
                <input type="text" pInputText class="inputsStyle" id="contactNumber" formControlName="contactNumber">
                <label For="contactNumber"><span class="Requied ">* </span>Contact Number</label>
            </div>
            <div class="col-4 p-float-label"> 
                <p-calendar formControlName="birthday" id="birthaday" appendTo="body" [showIcon]="true" [maxDate]="maxDate" [defaultDate]="maxDate"></p-calendar>
                <label For="birthaday"><span class="Requied ">* </span>Birthday</label>
            </div>
            <div class="col-4">
                <label><span class="Requied ">* </span>Gender : </label> &nbsp;
                <label for="male">Male</label>&nbsp;
                <p-radioButton value="male" inputId="male" formControlName="gender"></p-radioButton>&nbsp;
                <label for="female">Female</label>&nbsp;
                <p-radioButton value="female" inputId="female" formControlName="gender"></p-radioButton>
            </div>
        </div>

        <div class="grid pt-5">
            <div class="col-6 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="callingName" formControlName="callingName">
                <label For="callingName"><span class="Requied ">* </span>Calling Name</label>
            </div>
            <div class="col-6 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="school" formControlName="school">
                <label For="school"><span class="Requied ">* </span>School</label>
            </div>
        </div>

        <div class="grid pt-5">
            <div class="col-3 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="houseNo"  formControlName="houseNo">
                <label For="houseNo"><span class="Requied ">* </span>House No</label>
            </div>
            <div class="col-3 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="lane" formControlName="lane">
                <label For="lane">Lane</label>
            </div>
            <div class="col-3 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="city" formControlName="city">
                <label For="city"><span class="Requied ">* </span>City</label>
            </div>
            <div class="col-3 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="district" formControlName="district">
                <label For="district"><span class="Requied ">* </span>District</label>
            </div>
        </div>
        <div class="grid pt-5">
            <div class="col-12 p-float-label">
                <input type="text" pInputText class="inputsStyle" id="email" formControlName="email">
                <label For="email"><span class="Requied ">* </span>Email</label>
            </div>
        </div>
        <div class="grid pt-5">
            <div class="col-11"></div>
            <div class="col-1">
                <button label="Next" pButton severity="info" [disabled]="!studentDetailForm.valid" (click)="nextClick()"></button>
            </div>
        </div>
    </form>

    <!-- parent search form -->
    <form *ngIf="activeStepIndex == 1" [formGroup]="parentSearchForm">
        <div class="grid">
            <div class="col-4 p-float-label">
                <input type="text" pInputText class="inputsStyle" id="nicNo" formControlName="nicNo" maxlength="12">
                <label for="nicNo">NIC No</label>
            </div>

            <div class="col-3">
                <button (click)="searchParent()" pButton [disabled]="!parentSearchForm.valid">Search Parent</button>
            </div>
        </div>
    </form><br>
    <!-- parent form -->
    <form *ngIf="activeStepIndex == 1 && isSearchParent" [formGroup]="parentDetailForm">
        <div class="grid">
            <div class="col-12 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="parentName" formControlName="fullName">
                <label for="parentName"><span class="Requied ">* </span>Parent Name</label>
            </div>
        </div>

        <div class="grid pt-5">
            <div class="col-4 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="title" formControlName="title">
                <label for="title"><span class="Requied ">* </span>Title</label>
            </div>

            <div class="col-4 p-float-label">
                <input type="text" pInputText class="inputsStyle" id="NIC" formControlName="NIC">
                <label for="NIC">NIC No</label>
            </div>

            <div class="col-4 p-float-label">
                <p-calendar formControlName="birthday" id="birthaday" appendTo="body" [showIcon]="true"></p-calendar>
                <label For="birthaday"><span class="Requied ">* </span>Birthday</label>
            </div>
        </div>

        <div class="grid pt-5">
            <div class="col-4 p-float-label" *ngIf="relationships">
                <p-dropdown  [showClear]="true" appendTo="body" inputId="relationship" [options]="relationships" optionLabel="name"  placeholder="Relationship" [style]="{'width':'100%'}" formControlName="relationship" ></p-dropdown>
                <label for="relationship"><span class="Requied ">* </span>Relationship</label>
            </div>

            <div class="col-4 p-float-label">
                <input appCapitalizeEachWord type="text" pInputText class="inputsStyle" id="occupation" formControlName="occupation">
                <label for="occupation">Occupation</label>
            </div>

            <div class="col-4 p-float-label">
                <input type="text" pInputText class="inputsStyle" id="contactNumber" formControlName="contactNumber">
                <label For="contactNumber"><span class="Requied ">* </span>Contact Number</label>
            </div>
        </div>
        <div class="grid pt-5">
            <div class="col-12 p-float-label">
                <input type="text" pInputText class="inputsStyle" id="email" formControlName="email">
                <label for="email"><span class="Requied ">* </span>Email</label>
            </div>
        </div>

        <div class="grid pt-5">
            <div class="col-2">
                <button label="Previous" pButton class="p-button-secondary" (click)="previousClick()"></button>
            </div>
            <div class="col-6"></div>
            <div class="col-4">
                <button label="Submit and Next" pButton class="p-button-success" [disabled]="!parentDetailForm.valid" (click)="submitAndNextClick()"></button>
            </div>
        </div>
    </form>
    <!-- student enroment form -->
    <form *ngIf="activeStepIndex == 2" [formGroup]="enrollmentForm">
        <div class="grid">
            <div class="col-2">
                <p-dropdown [options]="grades" optionLabel="name" appendTo="body" placeholder="Grade" [style]="{'width':'100%'}" class="inputsStyle" formControlName="grade" (ngModelChange)="getsubjects()"></p-dropdown>
            </div>
            <div class="col-2">
                <p-dropdown  [options]="subjects" optionLabel="name" appendTo="body" placeholder="Subject" [style]="{'width':'100%'}" class="inputsStyle" formControlName="subject" (onChange)="getInstructors()"></p-dropdown>
            </div>
            <div class="col-2">
                <p-dropdown [options]="instructors" optionLabel="fullName" appendTo="body" placeholder="Instructor" [style]="{'width':'100%'}" class="inputsStyle" formControlName="instructor" (onChange)="getDates()"></p-dropdown>
            </div>
            <div class="col-2">
                <p-dropdown  [options]="courseDates" appendTo="body" placeholder="Date" [style]="{'width':'100%'}" class="inputsStyle" formControlName="date" (onChange)="getTimes()"></p-dropdown>
            </div>
            <div class="col-2">
                <p-dropdown  [options]="courseTimes" appendTo="body" placeholder="Time" [style]="{'width':'100%'}" class="inputsStyle" formControlName="time"></p-dropdown>
                <!-- <p-calendar  id="startHour" name="startHour" [timeOnly]="true" hourFormat="12" [inline]="false" placeholder="Select start hour" formControlName="time" appendTo="body"></p-calendar> -->
            </div>
            <div class="col-2">
                <button pButton class="p-button-primary" (click)="addClass()" [disabled]="!enrollmentForm.valid">Add Class</button>
            </div>
            
        </div><br><br>
        <div class="grid" *ngIf="enrolledCourses && enrolledCourses.length > 0">
            <div class="col-12">
                <p-table class="centerText" [value]="enrolledCourses" [tableStyle]="{ 'min-width': '100%' }">
                    <ng-template pTemplate="header">
                        <th>Grade</th>
                        <th>Subject</th>
                        <th>Instructor</th>
                        <th>Date of the class</th>
                        <th>Time of the class</th>
                        <th>Remove</th>
                    </ng-template>
                    <ng-template  pTemplate="body" let-enrolledCourses>
                        <tr>
                            <td class="centerText">{{enrolledCourses.grade.name}}</td>
                            <td class="centerText">{{enrolledCourses.subject.name}}</td>
                            <td class="centerText">{{enrolledCourses.teacher.fullName}}</td>
                            <td class="centerText">{{enrolledCourses.date}}</td>
                            <td class="centerText">{{enrolledCourses.startTime}}</td>
                            <td class="centerText">
                                <!-- <i class="fa-solid fa-xmark" (click)="removeCourse(enrolledCourses)"></i> -->
                                <i class="fa-solid fa-circle-xmark fa-xl " style="color: #ff0000;" (click)="removeCourse(enrolledCourses)"></i>
                                <!-- <button pButton class="p-button-danger" (click)="removeCourse(enrolledCourses)">Remove Class</button> -->
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>

        <div class="grid" *ngIf="enrolledCourses && enrolledCourses.length > 0">
            <div class="col-10"></div>
            <div class="col-2">
                <button pButton class="p-button-success" (click)="enrollCourses()">Submit</button>
            </div>
        </div>
    </form>
    
    <!-- student class fee payment details -->
    <div class="grid pt-5" *ngIf="activeStepIndex == 3">
        <div class="col-2"></div>
        <div class="col-8" >
            <!-- {{enrolCorseDTO | json}} -->
            <div class="grid">
                <div class="col-8">
                    <h6>Admission Fee</h6>
                </div>
                <div class="col-4">
                    <h6>{{addmisionFee}}</h6>
                </div>
            </div>
            <div class="grid" *ngFor="let enrolCorseDTO of enrolledCourses">
                <div class="col-8">
                    <h6>{{enrolCorseDTO.grade.name}} &nbsp; {{enrolCorseDTO.teacher.fullName}} &nbsp; {{enrolCorseDTO.subject.name}} class</h6>
                </div>
                <div class="col-4">
                    <h6>{{enrolCorseDTO.classFeeAmount}}</h6>
                </div>
            </div>
            <div class="grid underline">
                <div class="col-8">
                    <h5>Total</h5>
                </div>
                <div class="col-4">
                    <h5>{{classfeeWithAddmision()}}</h5>
                </div>
            </div><br>

            <!-- <div class="grid mt-6">
                <div class="col-4"></div>
                <div class="col-4">
                    <div class="grid" [formGroup]="payingMethodForm">
                        <div class="col-6">
                            <label for="payByCard">Pay By Card</label><br><br>
                            <p-radioButton value=1 inputId="payByCard" formControlName="method"></p-radioButton>
                        </div>
                        <div class="col-6">
                            <label for="payByCash">Pay By Cash</label><br><br>
                            <p-radioButton value=2 inputId="payByCash" formControlName="method"></p-radioButton>
                        </div>
                    </div>
                </div>
                <div class="col-4"></div>
            </div> -->

            <div class="grid mt-6">
                <div class="col-9"></div>
                <div class="col-3">
                    <button pButton class="p-button-success" (click)="proceddPayment()"  >Proceed Payment</button>
                    <!-- [disabled]="!(cardDetailsForm.valid)" -->
                </div>
            </div>

            <div class="grid" *ngIf="getPayingMethod.value == 2">
                <div class="col-6" [formGroup]="classFeeForm" >
                    <p-checkbox formControlName="hasPaymentDone" [binary]="true" value="true" inputId="payed"></p-checkbox>
                    <label for="payed">&nbsp; &nbsp; IS Payment Payed?</label>
                </div>
                <div class="col-6">
                    <button pButton class="p-button-primary" (click)="proceddPayment()" [disabled]="!(getHasPaymentDone.value)">Save and Next</button>
                </div>
            </div>
        </div>
        <div class="col-2"></div>
    </div>
    <!-- payment recipt -->
    <div class="grid pt-5" *ngIf="activeStepIndex == 4">
        <app-recipt-template [reciptTemplateDataVM]="reciptTemplateData"></app-recipt-template>
    </div>
    <div class="grid pt-5" *ngIf="activeStepIndex == 4">
        <div class="col-8"></div>
        <div class="col-4 text-right">
            <button label="Next" pButton severity="info" (click)="nextClick()"></button>
        </div>
    </div>
    <!-- student login details -->
    <div class="grid pt-5" *ngIf="activeStepIndex == 5">
        <div class="col-2"></div>
        <div class="col-8">
            <div class="grid">
                <div class="col-6">
                    <h6>Student UserCode : {{adAccountDetails.userCode}}</h6>
                </div>
                <div class="col-6">
                    <h6>Student Password : {{'student@1234'}}</h6>
                </div>
            </div>
        </div>
        <div class="col-2"></div>
    </div>
    <div class="grid" *ngIf="activeStepIndex == 5">
        <div class="col-10"></div>
        <div class="col-2">
            <button pButton class="p-button-info" (click)="closeQuickStudentCreationPopup()">Close</button>
        </div>
    </div>

</p-dialog>

<p-dialog header="Terms & Conditionse" [(visible)]="istacLoaded" [style]="{width: '60vw'}" [modal]="true" (onHide)="closeTerms()">
    <app-terms-and-conditions></app-terms-and-conditions>
</p-dialog>

<p-dialog header="Privacy Policy" [(visible)]="isprivacyLoaded" [style]="{width: '60vw'}" [modal]="true" (onHide)="closeTerms()">
    <app-terms-and-conditions></app-terms-and-conditions>
</p-dialog>

<p-dialog header="Refund Policy" [(visible)]="isRefundLoaded" [style]="{width: '60vw'}" [modal]="true" (onHide)="closeTerms()">
    <app-terms-and-conditions></app-terms-and-conditions>
</p-dialog>
<!-- 
<div *ngIf="isLoginig" class="loading">
    <img src="../../assets/giphy.gif" alt="" srcset="" class="lodingGif">
</div> -->